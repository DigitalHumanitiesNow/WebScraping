Over the weekend, Annie Swafford published another installment in her ongoing critique of Syuzhet, theÂ R package that I released in early February. In herÂ recent blog post, an interesting approach forÂ testing the get_transformed_values function is proposed[1]. Previously Annie had noted howÂ usingÂ theÂ default values for the low-pass filter may result in too much information loss, to which I replied that that is the point. Â (Readers hung up on this point are advised to go back and watch the Vonnegut video again.) With any kind of smoothing, there is going to be information loss. Â The function is designed to allow the user to tune the low pass filter for greater or lesser degrees of noise (an important point that I shall return to in a moment). In the newÂ post, AnnieÂ explores the efficacy of leavingÂ the low pass filter at its default value of 3;Â she demonstrates how this value appearsÂ to produceÂ a ringing artifact. Â This is something that the two of us had discussed at some length in an email correspondence prior to this blogging frenzy. Â In that correspondence, I promised to explore adding a gaussian filter to the package, a filter she believes would be more appropriate. Based on her advice, I have explored that option, and will do so further, but for now I remain unconvinced that there is a problem for Gauss to solve.[2] As I said in my previous post, I believeÂ the trueÂ test of the method lies in assessing whether or not the shapes produced by the transformationÂ are a good approximation of the shape of the story.Â But remember too, that the primaryÂ point of the transformation function is to solve the problem of length; it is hard to compare the plot shape of a long novel to a short one. Â The low-pass argument is essentially a visualization and noise reduction parameter. Â  Users whoÂ want a closer, scene by scene or sentenceÂ by sentenceÂ representation of the sentiment data, will likely gravitate to the get_percentage_values function (and a very large number of bins) as, for example, Lincoln Mullen has done on Rpubs.[3] The downside to that approach, of course, is that you cannotÂ compare two sentiment arcs mathematically; you can only do so by eye. Â You cannotÂ compare them mathematically because the amount of text inside each percentage segment will be quite different ifÂ the novels are of different lengths, and that would not be a fair comparison. Â The transformation function is my attempt atÂ solving this time domain conundrum. Â While I believe that it solves the problem well, I’m certainly open to other options. Â If we decide that theÂ transformation function is no good, that it producesÂ too much ringing, etc. then we should look forÂ a more attractive alternative. Â Until an alternative is foundÂ and demonstrated, I’m not going to allowÂ the perfect to become the enemy of the good. But, alas, here we are once again on the question of defining what is “good” and what is “good enough.” Â So let us turn now to that question and this matter of ringing artifacts. The problem of ringing artifacts is well understood in the signal processing literature if a bit less so in the narratological literature:-) Â Annie has done a fine job of explicating the nature of this problem, and I can’t help thinking that this is a very cleverÂ idea of hers. Â In fact, I wrote to Annie acknowledging this and noting how I wish I had thought of itÂ myself. But afterÂ repeating her experiment a number of times, with greater and lesser degrees of success, I decided that this exercise is ultimately a bit of a red herring. Â Among other things, there are no books with zero neutral values for an entire third, but more importantly the exerciseÂ has more to do with the setting of a particular user parameter than it does with the package. I’d like to now offer a bit of cake and eat it too. Â This most recentÂ criticism has focused on the default values for the low-pass filter that I set for the function. There is, of course, nothing preventing adjustment of that parameterÂ by those with a taste for adventure. Â The higher the number, the greater the number of components that are retained;Â the more components we retain, the less ringing and the closer we get to reproducing theÂ original signal. So let us assume for a moment that the sentiment detection methods all work perfectly. We know as a matter of fact that they don’t work perfectly (you know, like human beings), but thisÂ matterÂ of imprecision is something we haveÂ already covered in aÂ previous post where I showed that the three dictionary based methods tend to agree with each other and with the more sophisticated Stanford method. Â So even though we know we are not getting every sentence’s sentiment just right, let’s pretend that we are, if only for a moment. With that assumed,Â let us now recall the primary rationale for the Fourier transformation: to normalize the length of the x-axis. Â As it happens, we can do that normalization (the cake) and alsoÂ retain a great many more components than the 3 default components (eating it). Â Figure 1Â shows Joyce’s Portrait of the Artist transformed using a low pass filter size of 100. This producesÂ a graph with a lot more noise, but we have effectively eliminated anyÂ objectionable ringing. Â With the addition of a smoothing line (lowess function in R), what we see onceÂ again (ta da) is a beautiful, if rather less dramatic, example of Vonnegut’sÂ Man in Hole! Â And this is precisely the goal, to reveal the plot shape latent in the noise. Â The smaller low-pass filter accentuates this effect, the higher low-pass filter provides more information: both show the same essential shape. Figure 1: Portrait with low pass at 100 Figure 2: Portrait with low pass at 3 Figure 3: Portrait with low pass at 20 In the course of this research, I haveÂ handÂ examined the transformed shapes for several dozen novels. Â The number of novels I have examined corresponds to the number that IÂ feel I know well enough to assess (and also happen to possess in digital form). Â These include such old and new favoritesÂ as: Portrait of the Artist Picture of Dorian Grey Ulysses Blood Meridian Gone Girl Finnegans WakeÂ (nah, just kidding) . . . And many more. As I noted in my previous post, the only way to determine the efficacy of this model is to see if it approximates reality. Â We have now plotted Portrait of the Artist six ways to Sunday, and every time we have seen a version of the same man in holeÂ shape. Â I’ve read this book 20 times, I have taught this book a dozen times. Â It is a man in hole plot. In my (admittedly) anecdotal evaluations, I have continued to see convincing graphs, such as the one above (and the one below in figure 4). Â I have found a few special books that don’t do very well, but that is a story you will have to wait for (spoiler alert, they are not works of satire or dark humor, but they are multi-plot novels involving parallel stories). Still, I am open to the possibility that there is someÂ confirmation bias possible here. Â And this is why I wanted to release the package in the first place. Â I had hoped that putting the code on gitHub would entice others toward innovation within the code, but the unexpected criticism has certainly been healthy too, and this conversation has certainly made me thinkÂ of ways that the functionsÂ could be improved. In retrospect, it may have been better to wait until the full paper was complete before distributing the code. Â Most of the things we have covered in the last few weeks on this blog are things that get discussed in finer detail in the paper. Despite more details to come, I believe, asÂ Dryden might say, that the lastÂ (plot) line is now sufficiently explicated. Bonus Images: FigureÂ 4 In terms of basic shape, Figure 4Â is remarkably similar to the more dramatized version seen in figure 5Â below. Â If you can’t see it, you aren’t reading enoughÂ Vonnegut. FigureÂ 5 [1] How’s that for some awkward passive voice? A few on Twitter have expressed some thoughts on my use of Annie’s first name in my earlier response. Â Regular readers of this blog will knowÂ that I am consistent in referring to people by their full names upon first mention and by their first names thereafter. Â Previous victims of my “house style” have included David Mimno, David;Â Â Dana Mackenzie, Dana; Ben Schmidt, Ben; Franco Moretti, Franco, and Julia Flanders, Julia. Â There are probably others. [2] Anyone losing sleep over this gaussian filter business is welcomeÂ toÂ grabÂ the code and give it a whirl. [3]Â In the essay I am writingÂ about this work, I address a number of the nuances that I have skipped over in theseÂ blog posts. Â One of the nuances I discuss is an automated process for the selection of a low-pass filter size.
